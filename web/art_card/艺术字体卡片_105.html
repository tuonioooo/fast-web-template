<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>艺术字卡片</title>
  <link href="https://fonts.googleapis.com/css2?family=Zhi+Mang+Xing&display=swap" rel="stylesheet">
  <style>
    body {
      margin: 0;
      background: linear-gradient(135deg, #f5f3ee, #dcdbe0);
      font-family: 'Zhi Mang Xing', cursive;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      position: relative;
    }
    .card {
      width: 80%;
      max-width: 600px;
      padding: 40px 30px;
      background: linear-gradient(to bottom right, #f4f1ea, #e0e2e7);
      border-radius: 32px;
      border: 2px solid rgba(200, 200, 200, 0.3);
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.05);
      position: relative;
      text-align: center;
    }
    
    .canvas-container {
      margin: 20px 0;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    
    canvas {
      border-radius: 16px;
      background: rgba(255, 255, 255, 0.1);
    }
    
    .controls {
      margin-top: 20px;
      display: flex;
      justify-content: center;
      gap: 15px;
      flex-wrap: wrap;
    }
    
    .control-group {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 5px;
    }
    
    .control-group label {
      font-size: 14px;
      color: #6b5e52;
      font-weight: bold;
    }
    
    .control-group input {
      padding: 6px 10px;
      border: 1px solid rgba(200, 200, 200, 0.5);
      border-radius: 8px;
      background: rgba(255, 255, 255, 0.8);
      font-family: inherit;
      text-align: center;
    }
    
    .control-group input[type="range"] {
      width: 80px;
    }
    
    .control-group input[type="color"] {
      width: 40px;
      height: 30px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }
    
    .subtitle {
      font-size: 16px;
      color: #8b7d70;
      margin-top: 15px;
      opacity: 0.8;
    }
    
    .decor {
      position: absolute;
      bottom: -15px;
      left: 50%;
      transform: translateX(-50%);
      width: 60%;
      height: 10px;
      background: linear-gradient(90deg, transparent, rgba(195, 185, 214, 0.4), transparent);
      border-radius: 50%;
    }
    
    .flower-decor {
      position: absolute;
      color: #c3b9d6;
      font-size: 20px;
      opacity: 0.6;
    }
    
    .flower-1 { top: 20px; left: 30px; }
    .flower-2 { top: 30px; right: 40px; }
    .flower-3 { bottom: 40px; left: 40px; }
    .flower-4 { bottom: 30px; right: 30px; }
  </style>
</head>
<body>
  <div class="card">
    <div class="flower-decor flower-1">✿</div>
    <div class="flower-decor flower-2">❀</div>
    <div class="flower-decor flower-3">✿</div>
    <div class="flower-decor flower-4">❀</div>
    
    <div class="canvas-container">
      <canvas id="canvas" width="500" height="200"></canvas>
    </div>
    
    <div class="controls">
      <div class="control-group">
        <label>文字</label>
        <input type="text" id="textInput" value="温柔的力量" maxlength="8">
      </div>
      <div class="control-group">
        <label>颜色</label>
        <input type="color" id="colorInput" value="#c3b9d6">
      </div>
      <div class="control-group">
        <label>深度</label>
        <input type="range" id="depthInput" min="3" max="20" value="12">
      </div>
    </div>
    
    <div class="subtitle">让美好的文字拥有立体的灵魂</div>
    <div class="decor"></div>
  </div>

  <script>
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    const textInput = document.getElementById('textInput');
    const colorInput = document.getElementById('colorInput');
    const depthInput = document.getElementById('depthInput');
    
    let animationFrame = 0;
    
    function hexToRgb(hex) {
      const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
      return result ? {
        r: parseInt(result[1], 16),
        g: parseInt(result[2], 16),
        b: parseInt(result[3], 16)
      } : null;
    }
    
    function drawExtrudedText(text, x, y, depth, baseColor) {
      const rgb = hexToRgb(baseColor);
      
      // 绘制3D挤出效果 - 从后往前绘制
      for (let i = depth; i >= 0; i--) {
        const progress = i / depth;
        const offsetX = i * 0.8;
        const offsetY = i * 0.6;
        
        ctx.save();
        
        if (i === 0) {
          // 前表面 - 温柔的渐变
          const frontGradient = ctx.createLinearGradient(x - 80, y - 40, x + 80, y + 40);
          frontGradient.addColorStop(0, `rgba(${Math.min(255, rgb.r + 60)}, ${Math.min(255, rgb.g + 60)}, ${Math.min(255, rgb.b + 60)}, 1)`);
          frontGradient.addColorStop(0.3, `rgba(${Math.min(255, rgb.r + 30)}, ${Math.min(255, rgb.g + 30)}, ${Math.min(255, rgb.b + 30)}, 0.95)`);
          frontGradient.addColorStop(0.7, `rgba(${rgb.r}, ${rgb.g}, ${rgb.b}, 0.9)`);
          frontGradient.addColorStop(1, `rgba(${Math.max(0, rgb.r - 30)}, ${Math.max(0, rgb.g - 30)}, ${Math.max(0, rgb.b - 30)}, 0.85)`);
          ctx.fillStyle = frontGradient;
        } else {
          // 侧面和深度层 - 柔和的过渡
          const alpha = 0.7 - (progress * 0.5);
          const brightness = 1 - (progress * 0.6);
          ctx.fillStyle = `rgba(${Math.floor(rgb.r * brightness)}, ${Math.floor(rgb.g * brightness)}, ${Math.floor(rgb.b * brightness)}, ${alpha})`;
        }
        
        ctx.fillText(text, x + offsetX, y + offsetY);
        ctx.restore();
      }
    }
    
    function drawSoftHighlights(text, x, y) {
      // 温柔的顶部高光
      ctx.save();
      ctx.globalCompositeOperation = 'soft-light';
      const time = animationFrame * 0.02;
      const glowStrength = 0.4 + Math.sin(time) * 0.2;
      
      const topHighlight = ctx.createLinearGradient(x, y - 60, x, y - 10);
      topHighlight.addColorStop(0, `rgba(255, 255, 255, ${0.8 * glowStrength})`);
      topHighlight.addColorStop(0.5, `rgba(255, 255, 255, ${0.4 * glowStrength})`);
      topHighlight.addColorStop(1, 'rgba(255, 255, 255, 0)');
      
      ctx.fillStyle = topHighlight;
      ctx.fillText(text, x, y - 3);
      ctx.restore();
      
      // 柔和的侧面高光
      ctx.save();
      ctx.globalCompositeOperation = 'overlay';
      const sideHighlight = ctx.createLinearGradient(x - 100, y - 40, x + 100, y + 40);
      sideHighlight.addColorStop(0, 'rgba(255, 255, 255, 0)');
      sideHighlight.addColorStop(0.3, `rgba(255, 255, 255, ${0.25 * glowStrength})`);
      sideHighlight.addColorStop(0.7, `rgba(255, 255, 255, ${0.35 * glowStrength})`);
      sideHighlight.addColorStop(1, 'rgba(255, 255, 255, 0)');
      
      ctx.fillStyle = sideHighlight;
      ctx.fillText(text, x + 2, y - 1);
      ctx.restore();
    }
    
    function drawGlassText() {
      // 清空画布，使用卡片背景色
      ctx.fillStyle = 'rgba(244, 241, 234, 0.3)';
      ctx.fillRect(0, 0, canvas.width, canvas.height);
      
      const text = textInput.value || '温柔的力量';
      const baseColor = colorInput.value;
      const depth = parseInt(depthInput.value);
      const fontSize = Math.min(50, 300 / text.length);
      
      // 使用与页面一致的中文字体
      ctx.font = `bold ${fontSize}px "Zhi Mang Xing", "Microsoft YaHei", sans-serif`;
      ctx.textAlign = 'center';
      ctx.textBaseline = 'middle';
      
      const centerX = canvas.width / 2;
      const centerY = canvas.height / 2;
      
      // 动画参数
      const time = animationFrame * 0.015;
      const shadowDistance = 4 + Math.sin(time * 0.3) * 2;
      
      // 绘制柔和的阴影
      ctx.save();
      ctx.translate(shadowDistance, shadowDistance);
      ctx.fillStyle = 'rgba(107, 94, 82, 0.2)';
      ctx.filter = 'blur(8px)';
      ctx.fillText(text, centerX, centerY);
      ctx.restore();
      
      // 绘制近距离阴影
      ctx.save();
      ctx.translate(shadowDistance * 0.5, shadowDistance * 0.5);
      ctx.fillStyle = 'rgba(107, 94, 82, 0.15)';
      ctx.filter = 'blur(4px)';
      ctx.fillText(text, centerX, centerY);
      ctx.restore();
      
      // 绘制3D挤出效果
      drawExtrudedText(text, centerX, centerY, depth, baseColor);
      
      // 绘制柔和高光
      drawSoftHighlights(text, centerX, centerY);
      
      // 绘制温柔的外发光
      ctx.save();
      ctx.globalCompositeOperation = 'screen';
      ctx.shadowColor = baseColor;
      ctx.shadowBlur = 15 + Math.sin(time) * 5;
      ctx.shadowOffsetX = 0;
      ctx.shadowOffsetY = 0;
      ctx.strokeStyle = 'transparent';
      ctx.lineWidth = 1;
      ctx.strokeText(text, centerX, centerY);
      ctx.restore();
      
      animationFrame++;
    }
    
    function animate() {
      drawGlassText();
      requestAnimationFrame(animate);
    }
    
    // 事件监听
    textInput.addEventListener('input', drawGlassText);
    colorInput.addEventListener('input', drawGlassText);
    depthInput.addEventListener('input', drawGlassText);
    
    // 开始动画
    animate();
  </script>
</body>
</html>