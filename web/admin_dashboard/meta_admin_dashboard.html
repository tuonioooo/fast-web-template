<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ•°æ®æºä¸å…ƒæ•°æ®ç®¡ç†ç³»ç»Ÿ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            display: flex;
            min-height: 100vh;
        }

        /* å·¦ä¾§å¯¼èˆªæ  */
        .sidebar {
            width: 280px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-right: 1px solid rgba(255, 255, 255, 0.2);
            padding: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 30px;
            padding: 10px;
            border-radius: 12px;
            background: linear-gradient(135deg, #ff6b6b, #ffa726);
            color: white;
            font-weight: 600;
            font-size: 18px;
        }

        .logo-icon {
            width: 32px;
            height: 32px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .nav-menu {
            list-style: none;
        }

        .nav-item {
            margin-bottom: 8px;
        }

        .nav-link {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 16px;
            border-radius: 10px;
            text-decoration: none;
            color: #666;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-weight: 500;
        }

        .nav-link:hover {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            transform: translateX(5px);
        }

        .nav-link.active {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        .nav-icon {
            width: 20px;
            height: 20px;
            opacity: 0.8;
        }

        /* ä¸»å†…å®¹åŒºåŸŸ */
        .main-content {
            flex: 1;
            padding: 30px;
            overflow-y: auto;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 25px 30px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .header-title {
            font-size: 28px;
            font-weight: 700;
            color: #333;
            margin-bottom: 8px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .header-subtitle {
            color: #666;
            font-size: 16px;
        }

        .content-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            margin-bottom: 30px;
        }

        /* æœç´¢å’Œæ“ä½œåŒºåŸŸ */
        .search-section {
            display: flex;
            gap: 20px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .search-input {
            flex: 1;
            min-width: 200px;
            padding: 12px 20px;
            border: 2px solid rgba(102, 126, 234, 0.2);
            border-radius: 12px;
            font-size: 16px;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.8);
        }

        .search-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .select-dropdown {
            padding: 12px 20px;
            border: 2px solid rgba(102, 126, 234, 0.2);
            border-radius: 12px;
            font-size: 16px;
            background: rgba(255, 255, 255, 0.8);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .select-dropdown:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.5);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.8);
            color: #667eea;
            border: 2px solid #667eea;
        }

        .btn-secondary:hover {
            background: #667eea;
            color: white;
            transform: translateY(-2px);
        }

        /* æ•°æ®è¡¨æ ¼ */
        .data-table {
            width: 100%;
            border-collapse: collapse;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }

        .data-table th,
        .data-table td {
            padding: 16px;
            text-align: left;
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
        }

        .data-table th {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-size: 14px;
        }

        .data-table tr:hover {
            background: rgba(102, 126, 234, 0.05);
        }

        .status-badge {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .status-online {
            background: rgba(46, 204, 113, 0.1);
            color: #27ae60;
        }

        .status-offline {
            background: rgba(231, 76, 60, 0.1);
            color: #e74c3c;
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #666;
        }

        .empty-icon {
            width: 80px;
            height: 80px;
            margin: 0 auto 20px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 36px;
        }

        /* æ¨¡æ€æ¡† */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(10px);
            z-index: 1000;
        }

        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: white;
            border-radius: 20px;
            padding: 40px;
            max-width: 600px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            transform: scale(0.9);
            opacity: 0;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .modal.active .modal-content {
            transform: scale(1);
            opacity: 1;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .modal-title {
            font-size: 24px;
            font-weight: 700;
            color: #333;
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #666;
            transition: color 0.3s ease;
        }

        .close-btn:hover {
            color: #e74c3c;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
        }

        .form-input {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid rgba(102, 126, 234, 0.2);
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .form-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .form-actions {
            display: flex;
            gap: 12px;
            justify-content: flex-end;
            margin-top: 30px;
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .container {
                flex-direction: column;
            }

            .sidebar {
                width: 100%;
                padding: 15px;
            }

            .main-content {
                padding: 20px;
            }

            .search-section {
                flex-direction: column;
            }

            .data-table {
                font-size: 14px;
            }

            .data-table th,
            .data-table td {
                padding: 12px 8px;
            }
        }

        /* åŠ¨ç”»æ•ˆæœ */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .content-card {
            animation: fadeInUp 0.6s ease-out;
        }

        /* ä¸‰ç‚¹èœå• */
        .action-menu {
            position: relative;
        }

        .action-btn {
            background: none;
            border: none;
            padding: 8px;
            cursor: pointer;
            border-radius: 6px;
            transition: background 0.3s ease;
        }

        .action-btn:hover {
            background: rgba(102, 126, 234, 0.1);
        }

        .dropdown-menu {
            position: absolute;
            top: 100%;
            right: 0;
            background: white;
            border-radius: 8px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            min-width: 120px;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.3s ease;
            z-index: 100;
        }

        .dropdown-menu.active {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .dropdown-item {
            display: block;
            padding: 12px 16px;
            color: #333;
            text-decoration: none;
            transition: background 0.3s ease;
        }

        .dropdown-item:hover {
            background: rgba(102, 126, 234, 0.1);
        }

        /* å…ƒæ•°æ®ç®¡ç†ç›¸å…³æ ·å¼ */
        .metadata-container {
            display: flex;
            gap: 20px;
        }

        .metadata-sidebar {
            width: 280px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 12px;
            padding: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
            max-height: 600px;
            overflow-y: auto;
        }

        .metadata-main {
            flex: 1;
        }

        .metadata-tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        }

        .metadata-tab {
            padding: 12px 20px;
            cursor: pointer;
            font-weight: 600;
            color: #666;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
        }

        .metadata-tab:hover {
            color: #667eea;
        }

        .metadata-tab.active {
            color: #667eea;
            border-bottom-color: #667eea;
        }

        .metadata-content {
            display: none;
        }

        .metadata-content.active {
            display: block;
        }

        .metadata-info {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .metadata-info-item {
            flex: 1;
            min-width: 200px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
        }

        .metadata-info-title {
            font-size: 14px;
            color: #666;
            margin-bottom: 8px;
        }

        .metadata-info-value {
            font-size: 24px;
            font-weight: 700;
            color: #333;
        }

        .metadata-field-table {
            margin-top: 20px;
        }

        .metadata-field-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .metadata-field-title {
            font-size: 18px;
            font-weight: 600;
            color: #333;
        }

        .field-type {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 600;
        }

        .field-type-int {
            background: rgba(52, 152, 219, 0.1);
            color: #3498db;
        }

        .field-type-varchar {
            background: rgba(46, 204, 113, 0.1);
            color: #27ae60;
        }

        .field-type-datetime {
            background: rgba(155, 89, 182, 0.1);
            color: #9b59b6;
        }

        .field-type-bit {
            background: rgba(241, 196, 15, 0.1);
            color: #f39c12;
        }

        .field-type-tinyint {
            background: rgba(230, 126, 34, 0.1);
            color: #e67e22;
        }

        .index-badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 600;
            background: rgba(231, 76, 60, 0.1);
            color: #e74c3c;
        }

        .null-badge {
            display: inline-block;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: 600;
        }

        .null-yes {
            background: rgba(231, 76, 60, 0.1);
            color: #e74c3c;
        }

        .null-no {
            background: rgba(46, 204, 113, 0.1);
            color: #27ae60;
        }

        /* æ ‘å½¢ç»“æ„æ ·å¼ */
        .tree-view {
            font-size: 14px;
        }

        .tree-item {
            margin: 5px 0;
        }

        .tree-toggle {
            cursor: pointer;
            display: flex;
            align-items: center;
            padding: 6px 8px;
            border-radius: 6px;
            transition: all 0.2s ease;
        }

        .tree-toggle:hover {
            background: rgba(102, 126, 234, 0.1);
        }

        .tree-toggle.active {
            background: rgba(102, 126, 234, 0.2);
            color: #667eea;
            font-weight: 600;
        }

        .tree-toggle i {
            margin-right: 5px;
            transition: transform 0.2s ease;
            display: inline-block;
            width: 16px;
            height: 16px;
            text-align: center;
            line-height: 16px;
        }

        .tree-toggle.expanded i {
            transform: rotate(90deg);
        }

        .tree-content {
            display: none;
            padding-left: 20px;
        }

        .tree-content.expanded {
            display: block;
        }

        .tree-table {
            padding: 5px 8px;
            margin: 3px 0;
            cursor: pointer;
            border-radius: 4px;
            display: flex;
            align-items: center;
        }

        .tree-table:hover {
            background: rgba(102, 126, 234, 0.1);
        }

        .tree-table.active {
            background: rgba(102, 126, 234, 0.2);
            color: #667eea;
            font-weight: 600;
        }

        .tree-table i {
            margin-right: 5px;
            font-size: 12px;
        }

        .db-icon {
            color: #3498db;
        }

        .table-icon {
            color: #e67e22;
        }

        .no-data {
            text-align: center;
            padding: 40px 0;
            color: #666;
        }

        .no-data i {
            font-size: 48px;
            color: #ddd;
            margin-bottom: 10px;
            display: block;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- å·¦ä¾§å¯¼èˆªæ  -->
        <div class="sidebar">
            <div class="logo">
                <div class="logo-icon">E</div>
                <span>ERD Online</span>
            </div>
            <ul class="nav-menu">
                <li class="nav-item">
                    <a href="#" class="nav-link" data-page="dashboard">
                        <span class="nav-icon">ğŸ </span>
                        <span>å·¥ä½œå°</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" data-page="dbmodel">
                        <span class="nav-icon">ğŸ—ƒï¸</span>
                        <span>æ•°æ®åº“æ¨¡å‹</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" data-page="query">
                        <span class="nav-icon">ğŸ”</span>
                        <span>æ•°æ®æŸ¥è¯¢</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" data-page="datasource">
                        <span class="nav-icon">ğŸ“Š</span>
                        <span>æ•°æ®æº</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link active" data-page="metadata">
                        <span class="nav-icon">ğŸ“</span>
                        <span>å…ƒæ•°æ®</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" data-page="etl">
                        <span class="nav-icon">ğŸ”§</span>
                        <span>ETLå®æ–½</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" data-page="monitor">
                        <span class="nav-icon">ğŸ“ˆ</span>
                        <span>ç›‘æ§ç®¡ç†</span>
                    </a>
                </li>
            </ul>
        </div>

        <!-- ä¸»å†…å®¹åŒºåŸŸ -->
        <div class="main-content">
            <!-- æ•°æ®åº“è¿æ¥ç®¡ç†é¡µé¢ -->
            <div class="page-container" id="dashboard-page" style="display: none;">
                <div class="header">
                    <h1 class="header-title">æ•°æ®åº“è¿æ¥ç®¡ç†</h1>
                    <p class="header-subtitle">ç®¡ç†å’Œç›‘æ§çš„æ‰€æœ‰æ•°æ®åº“è¿æ¥</p>
                </div>

                <div class="content-card">
                    <div class="search-section">
                        <input type="text" class="search-input" placeholder="è¯·è¾“å…¥è¿æ¥åç§°..." id="searchInput">
                        <select class="select-dropdown" id="dbTypeSelect">
                            <option value="">è¯·é€‰æ‹©æ•°æ®åº“ç±»å‹</option>
                            <option value="mysql">MySQL</option>
                            <option value="postgresql">PostgreSQL</option>
                            <option value="oracle">Oracle</option>
                            <option value="sqlserver">SQL Server</option>
                            <option value="mongodb">MongoDB</option>
                        </select>
                        <button class="btn btn-primary" onclick="openModal()">
                            <span>â•</span>
                            æ–°å»ºè¿æ¥
                        </button>
                        <button class="btn btn-secondary" onclick="refreshData()">
                            <span>ğŸ”„</span>
                            åˆ·æ–°
                        </button>
                    </div>

                    <div class="table-container">
                        <table class="data-table" id="dataTable">
                            <thead>
                                <tr>
                                    <th>è¿æ¥åç§°</th>
                                    <th>æ•°æ®åº“ç±»å‹</th>
                                    <th>ä¸»æœº</th>
                                    <th>ç«¯å£</th>
                                    <th>ç”¨æˆ·å</th>
                                    <th>æ•°æ®åº“</th>
                                    <th>çŠ¶æ€</th>
                                    <th>æ“ä½œ</th>
                                </tr>
                            </thead>
                            <tbody id="tableBody">
                                <!-- æ•°æ®å°†é€šè¿‡JavaScriptåŠ¨æ€å¡«å…… -->
                            </tbody>
                        </table>

                        <div class="empty-state" id="emptyState" style="display: none;">
                            <div class="empty-icon">ğŸ“Š</div>
                            <h3>æš‚æ— æ•°æ®</h3>
                            <p>è¿˜æ²¡æœ‰é…ç½®ä»»ä½•æ•°æ®åº“è¿æ¥ï¼Œç‚¹å‡»"æ–°å»ºè¿æ¥"å¼€å§‹æ·»åŠ </p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- å…ƒæ•°æ®ç®¡ç†é¡µé¢ -->
            <div class="page-container" id="metadata-page">
                <div class="header">
                    <h1 class="header-title">å…ƒæ•°æ®ç®¡ç†</h1>
                    <p class="header-subtitle">æŸ¥çœ‹å’Œç®¡ç†æ•°æ®åº“è¡¨ç»“æ„ä¸å…ƒæ•°æ®ä¿¡æ¯</p>
                </div>

                <div class="content-card">
                    <div class="search-section">
                        <input type="text" class="search-input" placeholder="æœç´¢è¡¨å..." id="metadataSearchInput">
                        <select class="select-dropdown" id="metadataDbSelect">
                            <option value="mysql">MySQL (websql)</option>
                            <option value="postgresql">PostgreSQL (postgres17)</option>
                        </select>
                        <button class="btn btn-secondary" onclick="refreshMetadata()">
                            <span>ğŸ”„</span>
                            åˆ·æ–°
                        </button>
                    </div>

                    <div class="metadata-container">
                        <!-- å·¦ä¾§æ ‘å½¢ç»“æ„ -->
                        <div class="metadata-sidebar">
                            <div class="tree-view" id="metadataTree">
                                <div class="tree-item">
                                    <div class="tree-toggle expanded" data-target="mysql-tables">
                                        <i>â–¶</i>
                                        <span class="db-icon">ğŸ“Š</span> MySQL (websql)
                                    </div>
                                    <div class="tree-content expanded" id="mysql-tables">
                                        <div class="tree-table" data-table="test_user" onclick="selectTable('test_user')">
                                            <span class="table-icon">ğŸ“‹</span> test_user
                                        </div>
                                        <div class="tree-table" data-table="mc_sql_task_log" onclick="selectTable('mc_sql_task_log')">
                                            <span class="table-icon">ğŸ“‹</span> mc_sql_task_log
                                        </div>
                                        <div class="tree-table" data-table="address" onclick="selectTable('address')">
                                            <span class="table-icon">ğŸ“‹</span> address
                                        </div>
                                        <div class="tree-table" data-table="docs" onclick="selectTable('docs')">
                                            <span class="table-icon">ğŸ“‹</span> docs
                                        </div>
                                        <div class="tree-table" data-table="test_table" onclick="selectTable('test_table')">
                                            <span class="table-icon">ğŸ“‹</span> test_table
                                        </div>
                                        <div class="tree-table" data-table="test_stock_head" onclick="selectTable('test_stock_head')">
                                            <span class="table-icon">ï¿½ï¿½</span> test_stock_head
                                        </div>
                                    </div>
                                </div>
                                <div class="tree-item">
                                    <div class="tree-toggle" data-target="postgresql-tables">
                                        <i>â–¶</i>
                                        <span class="db-icon">ğŸ“Š</span> PostgreSQL (postgres17)
                                    </div>
                                    <div class="tree-content" id="postgresql-tables">
                                        <div class="tree-table" data-table="users" onclick="selectTable('users', 'postgresql')">
                                            <span class="table-icon">ğŸ“‹</span> users
                                        </div>
                                        <div class="tree-table" data-table="products" onclick="selectTable('products', 'postgresql')">
                                            <span class="table-icon">ğŸ“‹</span> products
                                        </div>
                                        <div class="tree-table" data-table="orders" onclick="selectTable('orders', 'postgresql')">
                                            <span class="table-icon">ğŸ“‹</span> orders
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- å³ä¾§å†…å®¹åŒºåŸŸ -->
                        <div class="metadata-main">
                            <div class="metadata-tabs">
                                <div class="metadata-tab active" data-tab="table-info">è¡¨ä¿¡æ¯</div>
                                <div class="metadata-tab" data-tab="field-info">å­—æ®µä¿¡æ¯</div>
                                <div class="metadata-tab" data-tab="index-info">ç´¢å¼•ä¿¡æ¯</div>
                            </div>

                            <!-- è¡¨ä¿¡æ¯å†…å®¹ -->
                            <div class="metadata-content active" id="table-info-content">
                                <div id="tableInfoContainer">
                                    <div class="metadata-field-header">
                                        <h3 class="metadata-field-title" id="selectedTableName">test_user</h3>
                                        <span id="selectedTableComment">æµ‹è¯•è¡¨</span>
                                    </div>

                                    <div class="metadata-info">
                                        <div class="metadata-info-item">
                                            <div class="metadata-info-title">è¡¨å</div>
                                            <div class="metadata-info-value" id="tableName">test_user</div>
                                        </div>
                                        <div class="metadata-info-item">
                                            <div class="metadata-info-title">æ•°æ®åº“</div>
                                            <div class="metadata-info-value" id="dbName">websql</div>
                                        </div>
                                        <div class="metadata-info-item">
                                            <div class="metadata-info-title">å­—æ®µæ•°é‡</div>
                                            <div class="metadata-info-value" id="fieldCount">7</div>
                                        </div>
                                        <div class="metadata-info-item">
                                            <div class="metadata-info-title">ç´¢å¼•æ•°é‡</div>
                                            <div class="metadata-info-value" id="indexCount">3</div>
                                        </div>
                                    </div>
                                </div>
                                <div id="noTableSelected" class="no-data" style="display: none;">
                                    <i>ğŸ“‹</i>
                                    <p>è¯·ä»å·¦ä¾§é€‰æ‹©ä¸€ä¸ªè¡¨</p>
                                </div>
                            </div>

                            <!-- å­—æ®µä¿¡æ¯å†…å®¹ -->
                            <div class="metadata-content" id="field-info-content">
                                <div id="fieldInfoContainer">
                                    <div class="metadata-field-header">
                                        <h3 class="metadata-field-title" id="fieldTableName">test_user</h3>
                                        <span id="fieldTableComment">æµ‹è¯•è¡¨</span>
                                    </div>

                                    <table class="data-table metadata-field-table">
                                        <thead>
                                            <tr>
                                                <th>å­—æ®µåç§°</th>
                                                <th>å­—æ®µæ³¨é‡Š</th>
                                                <th>å­—æ®µç±»å‹</th>
                                                <th>æ˜¯å¦NULL</th>
                                                <th>æ˜¯å¦è‡ªå¢</th>
                                            </tr>
                                        </thead>
                                        <tbody id="fieldTableBody">
                                            <tr>
                                                <td>id</td>
                                                <td>è‡ªå¢ä¸»é”®</td>
                                                <td><span class="field-type field-type-int">INT</span></td>
                                                <td><span class="null-badge null-no">NO</span></td>
                                                <td><span class="null-badge null-yes">YES</span></td>
                                            </tr>
                                            <tr>
                                                <td>name</td>
                                                <td>ç”¨æˆ·åç§°</td>
                                                <td><span class="field-type field-type-varchar">VARCHAR</span></td>
                                                <td><span class="null-badge null-yes">YES</span></td>
                                                <td><span class="null-badge null-no">NO</span></td>
                                            </tr>
                                            <tr>
                                                <td>age</td>
                                                <td>å¹´é¾„</td>
                                                <td><span class="field-type field-type-tinyint">TINYINT</span></td>
                                                <td><span class="null-badge null-no">NO</span></td>
                                                <td><span class="null-badge null-no">NO</span></td>
                                            </tr>
                                            <tr>
                                                <td>create_time</td>
                                                <td>æ³¨å†Œæ—¶é—´</td>
                                                <td><span class="field-type field-type-datetime">DATETIME</span></td>
                                                <td><span class="null-badge null-no">NO</span></td>
                                                <td><span class="null-badge null-no">NO</span></td>
                                            </tr>
                                            <tr>
                                                <td>last_login_time</td>
                                                <td>æœ€åç™»å½•æ—¶é—´</td>
                                                <td><span class="field-type field-type-datetime">DATETIME</span></td>
                                                <td><span class="null-badge null-yes">YES</span></td>
                                                <td><span class="null-badge null-no">NO</span></td>
                                            </tr>
                                            <tr>
                                                <td>dept</td>
                                                <td>éƒ¨é—¨</td>
                                                <td><span class="field-type field-type-tinyint">TINYINT</span></td>
                                                <td><span class="null-badge null-no">NO</span></td>
                                                <td><span class="null-badge null-no">NO</span></td>
                                            </tr>
                                            <tr>
                                                <td>del_flag</td>
                                                <td></td>
                                                <td><span class="field-type field-type-bit">BIT</span></td>
                                                <td><span class="null-badge null-no">NO</span></td>
                                                <td><span class="null-badge null-no">NO</span></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <div id="noTableSelectedForFields" class="no-data" style="display: none;">
                                    <i>ğŸ“‹</i>
                                    <p>è¯·ä»å·¦ä¾§é€‰æ‹©ä¸€ä¸ªè¡¨</p>
                                </div>
                            </div>

                            <!-- ç´¢å¼•ä¿¡æ¯å†…å®¹ -->
                            <div class="metadata-content" id="index-info-content">
                                <div id="indexInfoContainer">
                                    <div class="metadata-field-header">
                                        <h3 class="metadata-field-title" id="indexTableName">test_user</h3>
                                        <span id="indexTableComment">æµ‹è¯•è¡¨</span>
                                    </div>

                                    <table class="data-table">
                                        <thead>
                                            <tr>
                                                <th>ç´¢å¼•åç§°</th>
                                                <th>ç´¢å¼•å­—æ®µ</th>
                                                <th>æ˜¯å¦å”¯ä¸€</th>
                                                <th>ç´¢å¼•ç±»å‹</th>
                                            </tr>
                                        </thead>
                                        <tbody id="indexTableBody">
                                            <tr>
                                                <td><span class="index-badge">PRIMARY</span></td>
                                                <td>id</td>
                                                <td>æ˜¯</td>
                                                <td>BTREE</td>
                                            </tr>
                                            <tr>
                                                <td><span class="index-badge">idx_name</span></td>
                                                <td>name</td>
                                                <td>å¦</td>
                                                <td>BTREE</td>
                                            </tr>
                                            <tr>
                                                <td><span class="index-badge">idx_create_time</span></td>
                                                <td>create_time</td>
                                                <td>å¦</td>
                                                <td>BTREE</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <div id="noTableSelectedForIndexes" class="no-data" style="display: none;">
                                    <i>ğŸ“‹</i>
                                    <p>è¯·ä»å·¦ä¾§é€‰æ‹©ä¸€ä¸ªè¡¨</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- å…¶ä»–é¡µé¢å®¹å™¨ -->
            <div class="page-container" id="dbmodel-page" style="display: none;">
                <!-- æ•°æ®åº“æ¨¡å‹é¡µé¢å†…å®¹ -->
            </div>
            <div class="page-container" id="query-page" style="display: none;">
                <!-- æ•°æ®æŸ¥è¯¢é¡µé¢å†…å®¹ -->
            </div>
            <div class="page-container" id="datasource-page" style="display: none;">
                <!-- æ•°æ®æºé¡µé¢å†…å®¹ -->
            </div>
            <div class="page-container" id="etl-page" style="display: none;">
                <!-- ETLå®æ–½é¡µé¢å†…å®¹ -->
            </div>
            <div class="page-container" id="monitor-page" style="display: none;">
                <!-- ç›‘æ§ç®¡ç†é¡µé¢å†…å®¹ -->
            </div>
        </div>

        <!-- æ–°å»ºè¿æ¥æ¨¡æ€æ¡† -->
        <div class="modal" id="connectionModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 class="modal-title">æ–°å»ºæ•°æ®åº“è¿æ¥</h2>
                    <button class="close-btn" onclick="closeModal()">&times;</button>
                </div>
                <form id="connectionForm">
                    <div class="form-group">
                        <label class="form-label">è¿æ¥åç§° *</label>
                        <input type="text" class="form-input" id="connectionName" placeholder="ä¾‹å¦‚: ç”Ÿäº§ç¯å¢ƒä¸»æ•°æ®åº“" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">æ•°æ®åº“ç±»å‹ *</label>
                        <select class="form-input" id="connectionType" required>
                            <option value="">è¯·é€‰æ‹©</option>
                            <option value="mysql">MySQL</option>
                            <option value="postgresql">PostgreSQL</option>
                            <option value="oracle">Oracle</option>
                            <option value="sqlserver">SQL Server</option>
                            <option value="mongodb">MongoDB</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">ä¸»æœº *</label>
                        <input type="text" class="form-input" id="host" placeholder="ä¾‹å¦‚: localhost æˆ– 192.168.1.1" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">ç«¯å£ *</label>
                        <input type="number" class="form-input" id="port" placeholder="3306" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">æ•°æ®åº“åç§° *</label>
                        <input type="text" class="form-input" id="database" placeholder="ä¾‹å¦‚: mydatabase" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">é©±åŠ¨ç±»å</label>
                        <input type="text" class="form-input" id="driverClass" placeholder="ä¾‹å¦‚: com.mysql.cj.jdbc.Driver">
                    </div>
                    <div class="form-group">
                        <label class="form-label">ç”¨æˆ·å</label>
                        <input type="text" class="form-input" id="username" placeholder="æ•°æ®åº“ç”¨æˆ·å">
                    </div>
                    <div class="form-group">
                        <label class="form-label">å¯†ç </label>
                        <input type="password" class="form-input" id="password" placeholder="æ•°æ®åº“å¯†ç ">
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" onclick="closeModal()">å–æ¶ˆ</button>
                        <button type="button" class="btn btn-secondary" onclick="testConnection()">æµ‹è¯•è¿æ¥</button>
                        <button type="submit" class="btn btn-primary">ä¿å­˜è¿æ¥</button>
                    </div>
                </form>
            </div>
        </div>

        <script>
            // æ¨¡æ‹Ÿæ•°æ®
            let connections = [
                {
                    id: 1,
                    name: "ç”Ÿäº§ç¯å¢ƒä¸»æ•°æ®åº“",
                    type: "MySQL",
                    host: "192.168.1.100",
                    port: 3306,
                    username: "admin",
                    database: "production_db",
                    status: "online"
                },
                {
                    id: 2,
                    name: "æµ‹è¯•ç¯å¢ƒæ•°æ®åº“",
                    type: "PostgreSQL",
                    host: "192.168.1.101",
                    port: 5432,
                    username: "test_user",
                    database: "test_db",
                    status: "offline"
                },
                {
                    id: 3,
                    name: "å¼€å‘ç¯å¢ƒæ•°æ®åº“",
                    type: "MySQL",
                    host: "localhost",
                    port: 3306,
                    username: "dev_user",
                    database: "dev_db",
                    status: "online"
                }
            ];

            // æ¸²æŸ“è¡¨æ ¼æ•°æ®
            function renderTable(data = connections) {
                const tableBody = document.getElementById('tableBody');
                const emptyState = document.getElementById('emptyState');
                
                if (data.length === 0) {
                    tableBody.innerHTML = '';
                    emptyState.style.display = 'block';
                    return;
                }
                
                emptyState.style.display = 'none';
                
                tableBody.innerHTML = data.map(conn => `
                    <tr>
                        <td style="font-weight: 600;">${conn.name}</td>
                        <td>${conn.type}</td>
                        <td>${conn.host}</td>
                        <td>${conn.port}</td>
                        <td>${conn.username}</td>
                        <td>${conn.database}</td>
                        <td>
                            <span class="status-badge ${conn.status === 'online' ? 'status-online' : 'status-offline'}">
                                ${conn.status === 'online' ? 'åœ¨çº¿' : 'ç¦»çº¿'}
                            </span>
                        </td>
                        <td>
                            <div class="action-menu">
                                <button class="action-btn" onclick="toggleDropdown(${conn.id})">â‹®</button>
                                <div class="dropdown-menu" id="dropdown-${conn.id}">
                                    <a href="#" class="dropdown-item" onclick="editConnection(${conn.id})">ç¼–è¾‘</a>
                                    <a href="#" class="dropdown-item" onclick="testConnection(${conn.id})">æµ‹è¯•</a>
                                    <a href="#" class="dropdown-item" onclick="deleteConnection(${conn.id})">åˆ é™¤</a>
                                </div>
                            </div>
                        </td>
                    </tr>
                `).join('');
            }

            // æœç´¢åŠŸèƒ½
            function setupSearch() {
                const searchInput = document.getElementById('searchInput');
                const dbTypeSelect = document.getElementById('dbTypeSelect');
                
                function filterData() {
                    const searchTerm = searchInput.value.toLowerCase();
                    const selectedType = dbTypeSelect.value;
                    
                    const filtered = connections.filter(conn => {
                        const matchesSearch = conn.name.toLowerCase().includes(searchTerm) ||
                                            conn.host.toLowerCase().includes(searchTerm) ||
                                            conn.database.toLowerCase().includes(searchTerm);
                        const matchesType = !selectedType || conn.type.toLowerCase() === selectedType;
                        
                        return matchesSearch && matchesType;
                    });
                    
                    renderTable(filtered);
                }
                
                searchInput.addEventListener('input', filterData);
                dbTypeSelect.addEventListener('change', filterData);
            }

            // æ¨¡æ€æ¡†æ“ä½œ
            function openModal() {
                document.getElementById('connectionModal').classList.add('active');
                document.body.style.overflow = 'hidden';
            }

            function closeModal() {
                document.getElementById('connectionModal').classList.remove('active');
                document.body.style.overflow = 'auto';
                document.getElementById('connectionForm').reset();
            }

            // ä¸‹æ‹‰èœå•
            function toggleDropdown(id) {
                const dropdown = document.getElementById(`dropdown-${id}`);
                const allDropdowns = document.querySelectorAll('.dropdown-menu');
                
                allDropdowns.forEach(menu => {
                    if (menu !== dropdown) {
                        menu.classList.remove('active');
                    }
                });
                
                dropdown.classList.toggle('active');
            }

            // å…³é—­ä¸‹æ‹‰èœå•
            document.addEventListener('click', function(e) {
                if (!e.target.closest('.action-menu')) {
                    document.querySelectorAll('.dropdown-menu').forEach(menu => {
                        menu.classList.remove('active');
                    });
                }
            });

            // è¡¨å•æäº¤
            document.getElementById('connectionForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const formData = new FormData(this);
                const newConnection = {
                    id: connections.length + 1,
                    name: document.getElementById('connectionName').value,
                    type: document.getElementById('connectionType').value,
                    host: document.getElementById('host').value,
                    port: parseInt(document.getElementById('port').value),
                    username: document.getElementById('username').value,
                    database: document.getElementById('database').value,
                    status: 'online'
                };
                
                connections.push(newConnection);
                renderTable();
                closeModal();
                
                // æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯
                showNotification('è¿æ¥åˆ›å»ºæˆåŠŸï¼', 'success');
            });

            // æ•°æ®åº“ç±»å‹changeäº‹ä»¶ - è‡ªåŠ¨å¡«å……ç«¯å£
            document.getElementById('connectionType').addEventListener('change', function(e) {
                const portInput = document.getElementById('port');
                const driverInput = document.getElementById('driverClass');
                
                const defaults = {
                    mysql: { port: 3306, driver: 'com.mysql.cj.jdbc.Driver' },
                    postgresql: { port: 5432, driver: 'org.postgresql.Driver' },
                    oracle: { port: 1521, driver: 'oracle.jdbc.driver.OracleDriver' },
                    sqlserver: { port: 1433, driver: 'com.microsoft.sqlserver.jdbc.SQLServerDriver' },
                    mongodb: { port: 27017, driver: 'mongodb.jdbc.MongoDriver' }
                };
                
                const config = defaults[e.target.value];
                if (config) {
                    portInput.value = config.port;
                    driverInput.value = config.driver;
                }
            });

            // æµ‹è¯•è¿æ¥
            function testConnection(id) {
                showNotification('æ­£åœ¨æµ‹è¯•è¿æ¥...', 'info');
                
                // æ¨¡æ‹Ÿæµ‹è¯•è¿æ¥
                setTimeout(() => {
                    const success = Math.random() > 0.3;
                    if (success) {
                        showNotification('è¿æ¥æµ‹è¯•æˆåŠŸï¼', 'success');
                        if (id) {
                            const conn = connections.find(c => c.id === id);
                            if (conn) {
                                conn.status = 'online';
                                renderTable();
                            }
                        }
                    } else {
                        showNotification('è¿æ¥æµ‹è¯•å¤±è´¥ï¼Œè¯·æ£€æŸ¥é…ç½®ï¼', 'error');
                    }
                }, 2000);
            }

            // åˆ é™¤è¿æ¥
            function deleteConnection(id) {
                if (confirm('ç¡®å®šè¦åˆ é™¤è¿™ä¸ªè¿æ¥å—ï¼Ÿ')) {
                    connections = connections.filter(conn => conn.id !== id);
                    renderTable();
                    showNotification('è¿æ¥å·²åˆ é™¤ï¼', 'success');
                }
            }

            // åˆ·æ–°æ•°æ®
            function refreshData() {
                showNotification('æ­£åœ¨åˆ·æ–°æ•°æ®...', 'info');
                
                // æ¨¡æ‹Ÿåˆ·æ–°
                setTimeout(() => {
                    renderTable();
                    showNotification('æ•°æ®åˆ·æ–°å®Œæˆï¼', 'success');
                }, 1000);
            }

            // é€šçŸ¥ç³»ç»Ÿ
            function showNotification(message, type = 'info') {
                const notification = document.createElement('div');
                notification.className = `notification notification-${type}`;
                notification.textContent = message;
                
                notification.style.cssText = `
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    background: ${type === 'success' ? '#27ae60' : type === 'error' ? '#e74c3c' : '#3498db'};
                    color: white;
                    padding: 16px 24px;
                    border-radius: 12px;
                    font-weight: 600;
                    z-index: 10000;
                    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
                    transform: translateX(100%);
                    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                `;
                
                document.body.appendChild(notification);
                
                // åŠ¨ç”»è¿›å…¥
                setTimeout(() => {
                    notification.style.transform = 'translateX(0)';
                }, 100);
                
                // è‡ªåŠ¨ç§»é™¤
                setTimeout(() => {
                    notification.style.transform = 'translateX(100%)';
                    setTimeout(() => {
                        if (notification.parentNode) {
                            notification.parentNode.removeChild(notification);
                        }
                    }, 300);
                }, 3000);
            }

            // ç¼–è¾‘è¿æ¥
            function editConnection(id) {
                const connection = connections.find(conn => conn.id === id);
                if (connection) {
                    document.getElementById('connectionName').value = connection.name;
                    document.getElementById('connectionType').value = connection.type.toLowerCase();
                    document.getElementById('host').value = connection.host;
                    document.getElementById('port').value = connection.port;
                    document.getElementById('username').value = connection.username;
                    document.getElementById('database').value = connection.database;
                    
                    // ä¿®æ”¹æ¨¡æ€æ¡†æ ‡é¢˜
                    document.querySelector('.modal-title').textContent = 'ç¼–è¾‘æ•°æ®åº“è¿æ¥';
                    
                    // ä¿®æ”¹è¡¨å•æäº¤å¤„ç†
                    const form = document.getElementById('connectionForm');
                    form.onsubmit = function(e) {
                        e.preventDefault();
                        
                        // æ›´æ–°è¿æ¥ä¿¡æ¯
                        connection.name = document.getElementById('connectionName').value;
                        connection.type = document.getElementById('connectionType').value;
                        connection.host = document.getElementById('host').value;
                        connection.port = parseInt(document.getElementById('port').value);
                        connection.username = document.getElementById('username').value;
                        connection.database = document.getElementById('database').value;
                        
                        renderTable();
                        closeModal();
                        showNotification('è¿æ¥ä¿¡æ¯å·²æ›´æ–°ï¼', 'success');
                        
                        // é‡ç½®è¡¨å•æäº¤å¤„ç†
                        form.onsubmit = originalFormSubmit;
                        document.querySelector('.modal-title').textContent = 'æ–°å»ºæ•°æ®åº“è¿æ¥';
                    };
                    
                    openModal();
                }
            }

            // ä¿å­˜åŸå§‹è¡¨å•æäº¤å¤„ç†
            const originalFormSubmit = document.getElementById('connectionForm').onsubmit;

            // å¯¼èˆªèœå•åˆ‡æ¢
            document.querySelectorAll('.nav-link').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    // ç§»é™¤æ‰€æœ‰activeç±»
                    document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
                    
                    // æ·»åŠ activeç±»åˆ°å½“å‰é“¾æ¥
                    this.classList.add('active');
                    
                    // æ ¹æ®èœå•é¡¹åˆ‡æ¢å†…å®¹
                    const text = this.textContent.trim();
                    const headerTitle = document.querySelector('.header-title');
                    const headerSubtitle = document.querySelector('.header-subtitle');
                    
                    switch(text) {
                        case 'å·¥ä½œå°':
                            headerTitle.textContent = 'æ•°æ®åº“è¿æ¥ç®¡ç†';
                            headerSubtitle.textContent = 'ç®¡ç†å’Œç›‘æ§çš„æ‰€æœ‰æ•°æ®åº“è¿æ¥';
                            break;
                        case 'æ•°æ®åº“æ¨¡å‹':
                            headerTitle.textContent = 'æ•°æ®åº“æ¨¡å‹ç®¡ç†';
                            headerSubtitle.textContent = 'è®¾è®¡å’Œç®¡ç†æ•°æ®åº“ç»“æ„æ¨¡å‹';
                            break;
                        case 'æ•°æ®æŸ¥è¯¢':
                            headerTitle.textContent = 'SQLæŸ¥è¯¢å·¥å…·';
                            headerSubtitle.textContent = 'æ‰§è¡ŒSQLæŸ¥è¯¢å’Œæ•°æ®åˆ†æ';
                            break;
                        case 'æ•°æ®æº':
                            headerTitle.textContent = 'æ•°æ®æºç®¡ç†';
                            headerSubtitle.textContent = 'ç®¡ç†å„ç§æ•°æ®æºè¿æ¥å’Œé…ç½®';
                            break;
                        case 'ETLå®æ–½':
                            headerTitle.textContent = 'ETLä»»åŠ¡ç®¡ç†';
                            headerSubtitle.textContent = 'æ•°æ®æå–ã€è½¬æ¢å’ŒåŠ è½½ä»»åŠ¡';
                            break;
                        case 'ç›‘æ§ç®¡ç†':
                            headerTitle.textContent = 'ç³»ç»Ÿç›‘æ§';
                            headerSubtitle.textContent = 'ç›‘æ§ç³»ç»Ÿæ€§èƒ½å’Œè¿è¡ŒçŠ¶æ€';
                            break;
                    }
                });
            });

            // é”®ç›˜å¿«æ·é”®
            document.addEventListener('keydown', function(e) {
                // Ctrl + N æ–°å»ºè¿æ¥
                if (e.ctrlKey && e.key === 'n') {
                    e.preventDefault();
                    openModal();
                }
                
                // Escape å…³é—­æ¨¡æ€æ¡†
                if (e.key === 'Escape') {
                    closeModal();
                }
                
                // Ctrl + R åˆ·æ–°æ•°æ®
                if (e.ctrlKey && e.key === 'r') {
                    e.preventDefault();
                    refreshData();
                }
            });

            // å®æ—¶çŠ¶æ€æ£€æŸ¥
            function checkConnectionStatus() {
                connections.forEach(conn => {
                    // æ¨¡æ‹ŸéšæœºçŠ¶æ€å˜åŒ–
                    if (Math.random() < 0.1) {
                        conn.status = conn.status === 'online' ? 'offline' : 'online';
                    }
                });
                renderTable();
            }

            // å…ƒæ•°æ®ç®¡ç†ç›¸å…³åŠŸèƒ½
            function setupMetadataTabs() {
                const tabs = document.querySelectorAll('.metadata-tab');
                const contents = document.querySelectorAll('.metadata-content');
                
                tabs.forEach(tab => {
                    tab.addEventListener('click', function() {
                        const tabId = this.getAttribute('data-tab');
                        
                        // ç§»é™¤æ‰€æœ‰activeç±»
                        tabs.forEach(t => t.classList.remove('active'));
                        contents.forEach(c => c.classList.remove('active'));
                        
                        // æ·»åŠ activeç±»åˆ°å½“å‰é€‰é¡¹å¡
                        this.classList.add('active');
                        document.getElementById(`${tabId}-content`).classList.add('active');
                    });
                });
            }

            // æ ‘å½¢ç»“æ„å±•å¼€/æŠ˜å åŠŸèƒ½
            function setupTreeView() {
                const toggles = document.querySelectorAll('.tree-toggle');
                
                toggles.forEach(toggle => {
                    toggle.addEventListener('click', function() {
                        const targetId = this.getAttribute('data-target');
                        const target = document.getElementById(targetId);
                        
                        this.classList.toggle('expanded');
                        target.classList.toggle('expanded');
                    });
                });
            }

            // è¡¨é€‰æ‹©åŠŸèƒ½
            function selectTable(tableName, dbType = 'mysql') {
                // æ›´æ–°é€‰ä¸­çŠ¶æ€
                document.querySelectorAll('.tree-table').forEach(item => {
                    item.classList.remove('active');
                });
                document.querySelector(`.tree-table[data-table="${tableName}"]`).classList.add('active');
                
                // æ›´æ–°è¡¨ä¿¡æ¯
                document.getElementById('selectedTableName').textContent = tableName;
                document.getElementById('fieldTableName').textContent = tableName;
                document.getElementById('indexTableName').textContent = tableName;
                
                document.getElementById('tableName').textContent = tableName;
                document.getElementById('dbName').textContent = dbType === 'mysql' ? 'websql' : 'postgres17';
                
                // æ˜¾ç¤ºè¡¨ä¿¡æ¯ï¼Œéšè—æ— é€‰æ‹©çŠ¶æ€
                document.getElementById('tableInfoContainer').style.display = 'block';
                document.getElementById('noTableSelected').style.display = 'none';
                document.getElementById('fieldInfoContainer').style.display = 'block';
                document.getElementById('noTableSelectedForFields').style.display = 'none';
                document.getElementById('indexInfoContainer').style.display = 'block';
                document.getElementById('noTableSelectedForIndexes').style.display = 'none';
                
                // è¿™é‡Œå¯ä»¥æ·»åŠ åŠ è½½è¡¨å­—æ®µå’Œç´¢å¼•çš„é€»è¾‘
                showNotification(`æ­£åœ¨åŠ è½½ ${tableName} çš„å…ƒæ•°æ®ä¿¡æ¯...`, 'info');
                
                // æ¨¡æ‹ŸåŠ è½½æ•°æ®
                setTimeout(() => {
                    // æ ¹æ®ä¸åŒçš„è¡¨ååŠ è½½ä¸åŒçš„æ•°æ®
                    loadTableData(tableName, dbType);
                    showNotification(`${tableName} å…ƒæ•°æ®åŠ è½½å®Œæˆ`, 'success');
                }, 500);
            }

            // åŠ è½½è¡¨æ•°æ®
            function loadTableData(tableName, dbType) {
                // æ¨¡æ‹Ÿæ•°æ® - å®é™…åº”ç”¨ä¸­åº”è¯¥ä»æœåŠ¡å™¨è·å–
                const tableData = {
                    'test_user': {
                        comment: 'æµ‹è¯•è¡¨',
                        fieldCount: 7,
                        indexCount: 3,
                        fields: [
                            {name: 'id', comment: 'è‡ªå¢ä¸»é”®', type: 'INT', isNull: false, isAuto: true},
                            {name: 'name', comment: 'ç”¨æˆ·åç§°', type: 'VARCHAR', isNull: true, isAuto: false},
                            {name: 'age', comment: 'å¹´é¾„', type: 'TINYINT', isNull: false, isAuto: false},
                            {name: 'create_time', comment: 'æ³¨å†Œæ—¶é—´', type: 'DATETIME', isNull: false, isAuto: false},
                            {name: 'last_login_time', comment: 'æœ€åç™»å½•æ—¶é—´', type: 'DATETIME', isNull: true, isAuto: false},
                            {name: 'dept', comment: 'éƒ¨é—¨', type: 'TINYINT', isNull: false, isAuto: false},
                            {name: 'del_flag', comment: '', type: 'BIT', isNull: false, isAuto: false}
                        ],
                        indexes: [
                            {name: 'PRIMARY', fields: 'id', unique: true, type: 'BTREE'},
                            {name: 'idx_name', fields: 'name', unique: false, type: 'BTREE'},
                            {name: 'idx_create_time', fields: 'create_time', unique: false, type: 'BTREE'}
                        ]
                    },
                    'mc_sql_task_log': {
                        comment: 'æ—¥å¿—',
                        fieldCount: 5,
                        indexCount: 2,
                        fields: [
                            {name: 'id', comment: 'ä¸»é”®', type: 'INT', isNull: false, isAuto: true},
                            {name: 'task_name', comment: 'ä»»åŠ¡åç§°', type: 'VARCHAR', isNull: false, isAuto: false},
                            {name: 'status', comment: 'çŠ¶æ€', type: 'TINYINT', isNull: false, isAuto: false},
                            {name: 'create_time', comment: 'åˆ›å»ºæ—¶é—´', type: 'DATETIME', isNull: false, isAuto: false},
                            {name: 'content', comment: 'æ—¥å¿—å†…å®¹', type: 'TEXT', isNull: true, isAuto: false}
                        ],
                        indexes: [
                            {name: 'PRIMARY', fields: 'id', unique: true, type: 'BTREE'},
                            {name: 'idx_task_name', fields: 'task_name', unique: false, type: 'BTREE'}
                        ]
                    },
                    'address': {
                        comment: 'åœ°å€ä¿¡æ¯',
                        fieldCount: 4,
                        indexCount: 1,
                        fields: [
                            {name: 'id', comment: 'ä¸»é”®', type: 'INT', isNull: false, isAuto: true},
                            {name: 'user_id', comment: 'ç”¨æˆ·ID', type: 'INT', isNull: false, isAuto: false},
                            {name: 'address', comment: 'åœ°å€', type: 'VARCHAR', isNull: false, isAuto: false},
                            {name: 'is_default', comment: 'æ˜¯å¦é»˜è®¤', type: 'BIT', isNull: false, isAuto: false}
                        ],
                        indexes: [
                            {name: 'PRIMARY', fields: 'id', unique: true, type: 'BTREE'}
                        ]
                    }
                };
                
                // è·å–è¡¨æ•°æ®
                const data = tableData[tableName] || {
                    comment: 'æœªçŸ¥è¡¨',
                    fieldCount: 0,
                    indexCount: 0,
                    fields: [],
                    indexes: []
                };
                
                // æ›´æ–°è¡¨æ³¨é‡Š
                document.getElementById('selectedTableComment').textContent = data.comment;
                document.getElementById('fieldTableComment').textContent = data.comment;
                document.getElementById('indexTableComment').textContent = data.comment;
                
                // æ›´æ–°è¡¨ä¿¡æ¯
                document.getElementById('fieldCount').textContent = data.fieldCount;
                document.getElementById('indexCount').textContent = data.indexCount;
                
                // æ›´æ–°å­—æ®µè¡¨æ ¼
                const fieldTableBody = document.getElementById('fieldTableBody');
                fieldTableBody.innerHTML = data.fields.map(field => `
                    <tr>
                        <td>${field.name}</td>
                        <td>${field.comment}</td>
                        <td><span class="field-type field-type-${field.type.toLowerCase()}">${field.type}</span></td>
                        <td><span class="null-badge null-${field.isNull ? 'yes' : 'no'}">${field.isNull ? 'YES' : 'NO'}</span></td>
                        <td><span class="null-badge null-${field.isAuto ? 'yes' : 'no'}">${field.isAuto ? 'YES' : 'NO'}</span></td>
                    </tr>
                `).join('');
                
                // æ›´æ–°ç´¢å¼•è¡¨æ ¼
                const indexTableBody = document.getElementById('indexTableBody');
                indexTableBody.innerHTML = data.indexes.map(index => `
                    <tr>
                        <td><span class="index-badge">${index.name}</span></td>
                        <td>${index.fields}</td>
                        <td>${index.unique ? 'æ˜¯' : 'å¦'}</td>
                        <td>${index.type}</td>
                    </tr>
                `).join('');
            }

            // å…ƒæ•°æ®æœç´¢åŠŸèƒ½
            function setupMetadataSearch() {
                const searchInput = document.getElementById('metadataSearchInput');
                
                searchInput.addEventListener('input', function() {
                    const searchTerm = this.value.toLowerCase();
                    
                    document.querySelectorAll('.tree-table').forEach(item => {
                        const tableName = item.getAttribute('data-table').toLowerCase();
                        
                        if (tableName.includes(searchTerm)) {
                            item.style.display = 'flex';
                        } else {
                            item.style.display = 'none';
                        }
                    });
                });
            }

            // åˆ·æ–°å…ƒæ•°æ®
            function refreshMetadata() {
                showNotification('æ­£åœ¨åˆ·æ–°å…ƒæ•°æ®ä¿¡æ¯...', 'info');
                
                // æ¨¡æ‹Ÿåˆ·æ–°
                setTimeout(() => {
                    showNotification('å…ƒæ•°æ®åˆ·æ–°å®Œæˆï¼', 'success');
                }, 1000);
            }

            // é¡µé¢å¯¼èˆªåŠŸèƒ½
            function setupPageNavigation() {
                const navLinks = document.querySelectorAll('.nav-link');
                const pages = document.querySelectorAll('.page-container');
                
                navLinks.forEach(link => {
                    link.addEventListener('click', function(e) {
                        e.preventDefault();
                        
                        const pageId = this.getAttribute('data-page');
                        
                        // ç§»é™¤æ‰€æœ‰activeç±»
                        navLinks.forEach(l => l.classList.remove('active'));
                        pages.forEach(p => p.style.display = 'none');
                        
                        // æ·»åŠ activeç±»åˆ°å½“å‰é“¾æ¥
                        this.classList.add('active');
                        document.getElementById(`${pageId}-page`).style.display = 'block';
                        
                        // æ›´æ–°é¡µé¢æ ‡é¢˜
                        updatePageTitle(pageId);
                    });
                });
            }

            function updatePageTitle(pageId) {
                const headerTitle = document.querySelector('.header-title');
                const headerSubtitle = document.querySelector('.header-subtitle');
                
                switch(pageId) {
                    case 'dashboard':
                        headerTitle.textContent = 'æ•°æ®åº“è¿æ¥ç®¡ç†';
                        headerSubtitle.textContent = 'ç®¡ç†å’Œç›‘æ§çš„æ‰€æœ‰æ•°æ®åº“è¿æ¥';
                        break;
                    case 'dbmodel':
                        headerTitle.textContent = 'æ•°æ®åº“æ¨¡å‹ç®¡ç†';
                        headerSubtitle.textContent = 'è®¾è®¡å’Œç®¡ç†æ•°æ®åº“ç»“æ„æ¨¡å‹';
                        break;
                    case 'query':
                        headerTitle.textContent = 'SQLæŸ¥è¯¢å·¥å…·';
                        headerSubtitle.textContent = 'æ‰§è¡ŒSQLæŸ¥è¯¢å’Œæ•°æ®åˆ†æ';
                        break;
                    case 'datasource':
                        headerTitle.textContent = 'æ•°æ®æºç®¡ç†';
                        headerSubtitle.textContent = 'ç®¡ç†å„ç§æ•°æ®æºè¿æ¥å’Œé…ç½®';
                        break;
                    case 'metadata':
                        headerTitle.textContent = 'å…ƒæ•°æ®ç®¡ç†';
                        headerSubtitle.textContent = 'æŸ¥çœ‹å’Œç®¡ç†æ•°æ®åº“è¡¨ç»“æ„ä¸å…ƒæ•°æ®ä¿¡æ¯';
                        break;
                    case 'etl':
                        headerTitle.textContent = 'ETLä»»åŠ¡ç®¡ç†';
                        headerSubtitle.textContent = 'æ•°æ®æå–ã€è½¬æ¢å’ŒåŠ è½½ä»»åŠ¡';
                        break;
                    case 'monitor':
                        headerTitle.textContent = 'ç³»ç»Ÿç›‘æ§';
                        headerSubtitle.textContent = 'ç›‘æ§ç³»ç»Ÿæ€§èƒ½å’Œè¿è¡ŒçŠ¶æ€';
                        break;
                }
            }

            // é¡µé¢åŠ è½½å®Œæˆåçš„åˆå§‹åŒ–
            document.addEventListener('DOMContentLoaded', function() {
                renderTable();
                setupSearch();
                setupMetadataTabs();
                setupPageNavigation();
                setupTreeView();
                setupMetadataSearch();
                
                // é»˜è®¤é€‰ä¸­ç¬¬ä¸€ä¸ªè¡¨
                selectTable('test_user');
                
                // å®šæœŸæ£€æŸ¥è¿æ¥çŠ¶æ€
                setInterval(checkConnectionStatus, 30000);
                
                // æ·»åŠ é¡µé¢åŠ è½½åŠ¨ç”»
                document.querySelectorAll('.content-card').forEach((card, index) => {
                    card.style.animationDelay = `${index * 0.1}s`;
                });
            });

            // è¡¨æ ¼æ’åºåŠŸèƒ½
            function sortTable(columnIndex) {
                const table = document.getElementById('dataTable');
                const tbody = table.querySelector('tbody');
                const rows = Array.from(tbody.querySelectorAll('tr'));
                
                const sortedRows = rows.sort((a, b) => {
                    const aValue = a.cells[columnIndex].textContent.trim();
                    const bValue = b.cells[columnIndex].textContent.trim();
                    
                    if (!isNaN(aValue) && !isNaN(bValue)) {
                        return parseFloat(aValue) - parseFloat(bValue);
                    }
                    
                    return aValue.localeCompare(bValue);
                });
                
                tbody.innerHTML = '';
                sortedRows.forEach(row => tbody.appendChild(row));
            }

            // æ·»åŠ è¡¨æ ¼å¤´éƒ¨ç‚¹å‡»äº‹ä»¶
            document.querySelectorAll('.data-table th').forEach((th, index) => {
                th.style.cursor = 'pointer';
                th.addEventListener('click', () => sortTable(index));
            });

            // æ‰¹é‡æ“ä½œåŠŸèƒ½
            function selectAll() {
                const checkboxes = document.querySelectorAll('.row-checkbox');
                checkboxes.forEach(cb => cb.checked = true);
                updateBatchActions();
            }

            function updateBatchActions() {
                const checked = document.querySelectorAll('.row-checkbox:checked');
                const batchActions = document.getElementById('batchActions');
                
                if (checked.length > 0) {
                    batchActions.style.display = 'block';
                    batchActions.textContent = `å·²é€‰æ‹© ${checked.length} é¡¹`;
                } else {
                    batchActions.style.display = 'none';
                }
            }

            // å¯¼å‡ºåŠŸèƒ½
            function exportData() {
                const data = connections.map(conn => ({
                    'è¿æ¥åç§°': conn.name,
                    'æ•°æ®åº“ç±»å‹': conn.type,
                    'ä¸»æœº': conn.host,
                    'ç«¯å£': conn.port,
                    'ç”¨æˆ·å': conn.username,
                    'æ•°æ®åº“': conn.database,
                    'çŠ¶æ€': conn.status === 'online' ? 'åœ¨çº¿' : 'ç¦»çº¿'
                }));
                
                const csv = [
                    Object.keys(data[0]).join(','),
                    ...data.map(row => Object.values(row).join(','))
                ].join('\n');
                
                const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
                const link = document.createElement('a');
                link.href = URL.createObjectURL(blob);
                link.download = 'æ•°æ®åº“è¿æ¥åˆ—è¡¨.csv';
                link.click();
                
                showNotification('æ•°æ®å¯¼å‡ºæˆåŠŸï¼', 'success');
            }

            // æ•°æ®åº“è¿æ¥ç»Ÿè®¡
            function getConnectionStats() {
                const stats = {
                    total: connections.length,
                    online: connections.filter(c => c.status === 'online').length,
                    offline: connections.filter(c => c.status === 'offline').length,
                    types: {}
                };
                
                connections.forEach(conn => {
                    stats.types[conn.type] = (stats.types[conn.type] || 0) + 1;
                });
                
                return stats;
            }

            // æ˜¾ç¤ºç»Ÿè®¡ä¿¡æ¯
            function showStats() {
                const stats = getConnectionStats();
                const message = `
                    æ€»è¿æ¥æ•°: ${stats.total}
                    åœ¨çº¿: ${stats.online}
                    ç¦»çº¿: ${stats.offline}
                    
                    æ•°æ®åº“ç±»å‹åˆ†å¸ƒ:
                    ${Object.entries(stats.types).map(([type, count]) => `${type}: ${count}`).join('\n')}
                `;
                
                alert(message);
            }

            // è¿æ¥å¥åº·æ£€æŸ¥
            function healthCheck() {
                showNotification('æ­£åœ¨æ‰§è¡Œå¥åº·æ£€æŸ¥...', 'info');
                
                let completed = 0;
                const total = connections.length;
                
                connections.forEach((conn, index) => {
                    setTimeout(() => {
                        // æ¨¡æ‹Ÿå¥åº·æ£€æŸ¥
                        conn.status = Math.random() > 0.2 ? 'online' : 'offline';
                        completed++;
                        
                        if (completed === total) {
                            renderTable();
                            showNotification('å¥åº·æ£€æŸ¥å®Œæˆï¼', 'success');
                        }
                    }, index * 500);
                });
            }

            // æ·»åŠ æ›´å¤šå¿«æ·æ“ä½œæŒ‰é’®
            function addQuickActions() {
                const quickActions = document.createElement('div');
                quickActions.className = 'quick-actions';
                quickActions.innerHTML = `
                    <button class="btn btn-secondary" onclick="showStats()">ğŸ“Š ç»Ÿè®¡ä¿¡æ¯</button>
                    <button class="btn btn-secondary" onclick="exportData()">ğŸ“¥ å¯¼å‡ºæ•°æ®</button>
                    <button class="btn btn-secondary" onclick="healthCheck()">ğŸ” å¥åº·æ£€æŸ¥</button>
                `;
                
                const searchSection = document.querySelector('.search-section');
                searchSection.appendChild(quickActions);
            }

            // åˆå§‹åŒ–å¿«æ·æ“ä½œ
            setTimeout(addQuickActions, 1000);

            // é¡µé¢å¯è§æ€§API - å½“é¡µé¢é‡æ–°å˜ä¸ºå¯è§æ—¶åˆ·æ–°æ•°æ®
            document.addEventListener('visibilitychange', function() {
                if (!document.hidden) {
                    checkConnectionStatus();
                }
            });

            // ç½‘ç»œçŠ¶æ€æ£€æµ‹
            window.addEventListener('online', function() {
                showNotification('ç½‘ç»œè¿æ¥å·²æ¢å¤', 'success');
            });

            window.addEventListener('offline', function() {
                showNotification('ç½‘ç»œè¿æ¥å·²æ–­å¼€', 'error');
            });

            // è‡ªåŠ¨ä¿å­˜åŠŸèƒ½
            function autoSave() {
                localStorage.setItem('connections', JSON.stringify(connections));
            }

            // è‡ªåŠ¨åŠ è½½åŠŸèƒ½
            function autoLoad() {
                const saved = localStorage.getItem('connections');
                if (saved) {
                    connections = JSON.parse(saved);
                }
            }

            // åœ¨æ•°æ®å˜åŒ–æ—¶è‡ªåŠ¨ä¿å­˜
            const originalPush = connections.push;
            connections.push = function(...args) {
                const result = originalPush.apply(this, args);
                autoSave();
                return result;
            };

            // é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨åŠ è½½
            autoLoad();

            console.log('æ•°æ®æºç®¡ç†ç³»ç»Ÿå·²åˆå§‹åŒ–å®Œæˆï¼');
        </script>
    </div>
</body>
</html>